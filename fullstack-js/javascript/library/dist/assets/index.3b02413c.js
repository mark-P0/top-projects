var E=Object.defineProperty;var k=(t,e,o)=>e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var i=(t,e,o)=>(k(t,typeof e!="symbol"?e+"":e,o),o),R=(t,e,o)=>{if(!e.has(t))throw TypeError("Cannot "+o)};var d=(t,e,o)=>(R(t,e,"read from private field"),o?o.call(t):e.get(t)),b=(t,e,o)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,o)};(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();function L(){const t=document.querySelectorAll(".needs-validation");Array.from(t).forEach(e=>{e.addEventListener("submit",o=>{e.checkValidity()||(o.preventDefault(),o.stopPropagation()),e.classList.add("was-validated")},!1)})}L();function A(){const t=document.querySelector(".modal"),e=document.querySelector(".modal form");t.addEventListener("hidden.bs.modal",()=>{e.reset(),e.classList.remove("was-validated")})}A();const a=(t,e,o,r)=>({element:t,attributes:e,content:o,children:r});function p(t){let{element:e}=t;const{attributes:o,content:r,children:s}=t;if(typeof e=="string"){if(e=document.createElement(e),o)for(const[n,l]of Object.entries(o))e.setAttribute(n,l);r&&(e.textContent=r)}if(s)for(const n of s)e.append(p(n));return e}var h=(t=>(t.READ="read",t.UNREAD="unread",t))(h||{}),c,u;class O{constructor(e,o,r,s){b(this,c);i(this,"__element__");i(this,"title");i(this,"author");i(this,"pages");i(this,"isRead");this.title=e,this.author=o,this.pages=r,this.isRead=s,this.__element__=(()=>{const n=a("h6",{class:"card-title fw-semibold"},this.title,null),l=this.author?a("p",{class:"card-text fs-6"},`${this.author}, ${d(this,c,u)}`,null):a("p",{class:"card-text fs-6 fst-italic"},`By ?, ${d(this,c,u)}`,null),g=this.isRead?"read":"unread",y=a("button",{type:"button",class:"btn read-indicator","data-state":g},null,null),v=a("button",{type:"button",class:"btn-close","aria-label":"Remove"},null,null),_=p(a("div",{class:"card book shadow"},null,[a("div",{class:"card-body"},null,[n,l]),a("div",{class:"card-footer"},null,[y,v])]));return _.__jsObj__=this,_})()}info(){const e=this.isRead?"already read":"not read yet",o=d(this,c,u);return`${this.title} by ${this.author}, ${o}, ${e}`}toggleStatus(){this.isRead=!this.isRead}}c=new WeakSet,u=function(){const e="page";return this.pages===null?`? ${e}s`:this.pages===1?`${this.pages} ${e}`:`${this.pages} ${e}s`};const m={__element__:document.querySelector("#shelves"),get books(){return Array.from(this.__element__.children).slice(1).map(t=>t==null?void 0:t.__jsObj__)},add(t){this.__element__.append(t.__element__)}};m.__element__.addEventListener("click",t=>{const e=t.target;if(!(e!=null&&e.classList.contains("read-indicator")))return;const r=e.closest(".book").__jsObj__;r.toggleStatus();const s=r.isRead?h.READ:h.UNREAD;e.dataset.state=s});m.__element__.addEventListener("click",t=>{const e=t.target;if(!(e!=null&&e.classList.contains("btn-close")))return;const o=e.closest(".book");m.__element__.removeChild(o)});const $=document.querySelector(".modal .modal-footer button"),f=document.getElementById("add-book-form");$.addEventListener("click",()=>{if(!f.checkValidity())return;const e=Object.fromEntries(new FormData(f));let o=e.bookTitle,r=e.bookAuthor,s=e.bookPageCt,n=e.bookIsRead;n=n!==void 0,s=s===""?null:Number.parseInt(s),m.add(new O(o,r,s,n)),bootstrap.Modal.getOrCreateInstance(f.closest(".modal")).hide()});
